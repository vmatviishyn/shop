<div class="cart-list">
    <button
        [matMenuTriggerFor]="cartListMenu"
        mat-icon-button
        aria-label="Mini cart icon button">
        <mat-icon
            [matBadge]="products.length"
            matBadgeSize="small"
            matBadgeColor="warn"
            class="material-icons material-icons-outlined">shopping_cart</mat-icon>
    </button>

    <mat-menu
        #cartListMenu="matMenu"
        xPosition="before"
        hasBackdrop="true"
        backdropClass="backdrop">

        <div *ngIf="products.length; else elseBlock">
            <div *ngFor="let product of products">
                <app-cart-item
                    (removeProduct)="onRemoveProduct($event)"
                    [product]="product">
                </app-cart-item>
            </div>

            <div class="cart-list__footer">
                <button mat-button class="cart-list__cart-btn">Go to Cart</button>
                <p class="cart-list__cart-total">
                    Total: {{ cartTotal | currency: 'UAH':'symbol-narrow':'1.0-2' }}
                </p>
            </div>
        </div>

        <ng-template #elseBlock>
            <p class="cart-list__empty-message">Cart is empty</p>
        </ng-template>
    </mat-menu>
</div>
